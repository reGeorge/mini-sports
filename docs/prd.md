# 乒乓球比赛管理系统需求文档

## 1. 项目概述

乒乓球比赛管理系统是一个微信小程序，旨在帮助组织者管理乒乓球比赛，参赛者报名参加比赛并查看比赛信息。系统支持用户管理、赛事管理、比赛流程控制、积分系统和数据统计等功能。

## 2. 用户管理

### 2.1 用户注册与登录
- 用户可以通过微信授权注册并登录系统
- 系统记录用户的基本信息，如昵称、电话等

### 2.2 用户角色管理
- 系统支持多种用户角色：
  - 管理员：系统管理员，拥有所有权限
  - 普通用户：普通参赛者
  - 裁判员：负责比赛裁判
  - 赛事管理员：负责赛事的创建和管理
- 管理员可以分配和修改用户角色
- 用户可以同时拥有多个角色

### 2.3 用户权限控制
- 基于角色的权限控制系统
- 不同角色拥有不同的功能权限
- 管理员可以为每个角色设置详细权限

### 2.4 用户信息管理
- 用户可以查看和编辑个人资料
- 管理员可以查看所有用户信息
- 用户信息包括：昵称、联系方式、握拍方式、球拍配置等乒乓球相关技术信息
- 用户积分信息展示

## 3. 赛事管理

### 3.1 赛事创建
- 赛事管理员可以创建新的乒乓球赛事
- 创建赛事时需填写以下信息：
  - 赛事名称（如：2025年乒乓球赛事）
  - 赛事说明（比赛赛制：三局两胜等）
  - 开始时间
  - 比赛地点
  - 最大人数
  - 比赛类型（单打、双打、团体）
  - 积分上限（限制报名的最低积分要求）
  - 报名费用

### 3.2 赛事编辑
- 赛事管理员可以编辑已创建的赛事信息
- 编辑界面与创建界面相同，预填写已有信息

### 3.3 赛事列表查询
- 用户可以查看所有赛事列表
- 赛事列表显示：
  - 赛事名称
  - 比赛时间
  - 比赛地点
  - 参与人数/最大人数
  - 比赛类型
  - 赛事状态（报名中、进行中、已结束）

### 3.4 赛事详情查看
- 用户可以查看赛事详细信息，包括：
  - 基本信息（名称、时间、地点等）
  - 参赛名单
  - 赛程（小组赛、淘汰赛）
  - 积分上限
  - 报名费用
  - 赛事说明
  - 比赛规则

### 3.5 赛事状态管理
- 赛事具有不同状态：
  - 草稿：创建但未发布
  - 报名中：开放报名
  - 进行中：比赛进行中
  - 已结束：比赛已结束
- 赛事管理员可以手动更改赛事状态
- 系统可根据时间自动更新状态

## 4. 比赛流程

### 4.1 赛事报名
- 符合条件的用户可以报名参加赛事
- 报名需支付报名费用
- 报名时显示确认对话框，确认支付金额
- 报名成功后会出现在参赛名单中

### 4.2 小组赛
- 系统支持自动分组功能：
  - 可设置分组数量（如4组）
  - 可设置每组出线人数（如4人）
- 自动生成小组赛程
- 裁判员可记录比分
- 系统自动计算小组排名：
  - 基于胜场数
  - 负场数
  - 积分等因素

### 4.3 淘汰赛
- 系统自动根据小组赛结果生成淘汰赛对阵表
- 支持半决赛、决赛等阶段
- 比赛结果记录
- 自动处理晋级关系
- 最终排名确定

## 5. 积分系统

### 5.1 积分查询
- 用户可以查询自己的积分情况
- 积分信息包括：
  - 当前积分值
  - 积分等级（如BEGINNER对应2550分）
  - 用户ID和昵称
  - 握拍方式
  - 球拍配置
  - 参赛场次
  - 胜率等统计信息

### 5.2 积分设置
- 管理员可以为用户设置积分
- 可以调整积分值
- 记录积分变更原因（如"初始化"）

## 6. 数据统计

### 6.1 用户参赛记录
- 用户可以查看自己参加过的所有赛事
- 显示赛事信息：
  - 赛事名称
  - 比赛类型
  - 比赛日期
  - 比赛状态（已结束、进行中）

## 7. 管理员控制台

### 7.1 角色管理
- 管理员可以访问管理员控制台
- 在控制台中可以管理用户角色
- 可以编辑各角色的权限设置

### 7.2 用户角色分配
- 管理员可以搜索用户
- 为用户分配角色
- 设置用户的积分

## 8. 系统要求

### 8.1 技术要求
- 微信小程序平台
- 支持多用户同时在线
- 数据实时更新
- 稳定可靠的积分计算系统

### 8.2 安全要求
- 用户数据安全保护
- 管理员操作日志记录
- 权限严格控制

## 9. 未来功能扩展

以下功能在当前版本中暂未实现，计划在未来版本中加入：
- 报名审核功能
- 比赛积分规则展示
- 积分记录详情
- 积分排名功能
- 积分历史查询
- 用户胜负详细统计
- 积分变动记录
