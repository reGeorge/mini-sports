{"ast":null,"code":"import { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { showSuccessToast, showFailToast } from 'vant';\nimport { register } from '@/api/user';\nexport default {\n  name: 'Register',\n  setup() {\n    const router = useRouter();\n    const formData = ref({\n      nickname: '',\n      password: '',\n      phone: ''\n    });\n    const onSubmit = async values => {\n      try {\n        const res = await register({\n          ...values,\n          avatarUrl: '/images/avatar/fzd.png' // 设置默认头像\n        });\n        showSuccessToast('注册成功');\n        router.push('/login');\n      } catch (error) {\n        showFailToast(error.response?.data?.message || '注册失败');\n      }\n    };\n    const onClickLeft = () => {\n      router.back();\n    };\n    const goToLogin = () => {\n      router.push('/login');\n    };\n    return {\n      formData,\n      onSubmit,\n      onClickLeft,\n      goToLogin\n    };\n  }\n};","map":{"version":3,"names":["ref","useRouter","showSuccessToast","showFailToast","register","name","setup","router","formData","nickname","password","phone","onSubmit","values","res","avatarUrl","push","error","response","data","message","onClickLeft","back","goToLogin"],"sources":["/Users/regeorge/Documents/codeStore/mini-sports/sports-h5/src/views/user/Register.vue"],"sourcesContent":["<template>\n  <div class=\"register\">\n    <van-nav-bar\n      title=\"用户注册\"\n      left-text=\"返回\"\n      left-arrow\n      @click-left=\"onClickLeft\"\n    />\n    \n    <van-form @submit=\"onSubmit\">\n      <van-cell-group inset>\n        <van-field\n          v-model=\"formData.nickname\"\n          name=\"nickname\"\n          label=\"昵称\"\n          placeholder=\"请输入昵称\"\n          :rules=\"[{ required: true, message: '请填写昵称' }]\"\n        />\n        <van-field\n          v-model=\"formData.password\"\n          type=\"password\"\n          name=\"password\"\n          label=\"密码\"\n          placeholder=\"请输入密码\"\n          :rules=\"[{ required: true, message: '请填写密码' }]\"\n        />\n        <van-field\n          v-model=\"formData.phone\"\n          name=\"phone\"\n          label=\"手机号\"\n          placeholder=\"请输入手机号\"\n          :rules=\"[\n            { required: true, message: '请填写手机号' },\n            { pattern: /^1[3-9]\\d{9}$/, message: '请输入正确的手机号' }\n          ]\"\n        />\n      </van-cell-group>\n      \n      <div style=\"margin: 16px;\">\n        <van-button round block type=\"primary\" native-type=\"submit\">\n          注册\n        </van-button>\n      </div>\n    </van-form>\n\n    <div class=\"login-link\">\n      <span @click=\"goToLogin\">已有账号？去登录</span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { showSuccessToast, showFailToast } from 'vant'\nimport { register } from '@/api/user'\n\nexport default {\n  name: 'Register',\n  setup() {\n    const router = useRouter()\n    const formData = ref({\n      nickname: '',\n      password: '',\n      phone: ''\n    })\n\n    const onSubmit = async (values) => {\n      try {\n        const res = await register({\n          ...values,\n          avatarUrl: '/images/avatar/fzd.png'  // 设置默认头像\n        })\n        showSuccessToast('注册成功')\n        router.push('/login')\n      } catch (error) {\n        showFailToast(error.response?.data?.message || '注册失败')\n      }\n    }\n\n    const onClickLeft = () => {\n      router.back()\n    }\n\n    const goToLogin = () => {\n      router.push('/login')\n    }\n\n    return {\n      formData,\n      onSubmit,\n      onClickLeft,\n      goToLogin\n    }\n  }\n}\n</script>\n\n<style scoped>\n.register {\n  padding-bottom: 20px;\n}\n.login-link {\n  text-align: center;\n  margin-top: 16px;\n  color: #1989fa;\n}\n.login-link span {\n  cursor: pointer;\n}\n</style> "],"mappings":"AAoDA,SAASA,GAAE,QAAS,KAAI;AACxB,SAASC,SAAQ,QAAS,YAAW;AACrC,SAASC,gBAAgB,EAAEC,aAAY,QAAS,MAAK;AACrD,SAASC,QAAO,QAAS,YAAW;AAEpC,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,KAAKA,CAAA,EAAG;IACN,MAAMC,MAAK,GAAIN,SAAS,CAAC;IACzB,MAAMO,QAAO,GAAIR,GAAG,CAAC;MACnBS,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE;IACT,CAAC;IAED,MAAMC,QAAO,GAAI,MAAOC,MAAM,IAAK;MACjC,IAAI;QACF,MAAMC,GAAE,GAAI,MAAMV,QAAQ,CAAC;UACzB,GAAGS,MAAM;UACTE,SAAS,EAAE,wBAAuB,CAAG;QACvC,CAAC;QACDb,gBAAgB,CAAC,MAAM;QACvBK,MAAM,CAACS,IAAI,CAAC,QAAQ;MACtB,EAAE,OAAOC,KAAK,EAAE;QACdd,aAAa,CAACc,KAAK,CAACC,QAAQ,EAAEC,IAAI,EAAEC,OAAM,IAAK,MAAM;MACvD;IACF;IAEA,MAAMC,WAAU,GAAIA,CAAA,KAAM;MACxBd,MAAM,CAACe,IAAI,CAAC;IACd;IAEA,MAAMC,SAAQ,GAAIA,CAAA,KAAM;MACtBhB,MAAM,CAACS,IAAI,CAAC,QAAQ;IACtB;IAEA,OAAO;MACLR,QAAQ;MACRI,QAAQ;MACRS,WAAW;MACXE;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}