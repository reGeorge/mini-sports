{"ast":null,"code":"import { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { showSuccessToast, showFailToast } from 'vant';\nimport { login } from '@/api/user';\nexport default {\n  name: 'Login',\n  setup() {\n    const router = useRouter();\n    const formData = ref({\n      nickname: '',\n      password: ''\n    });\n    const onSubmit = async values => {\n      try {\n        const res = await login(values);\n        showSuccessToast('登录成功');\n        // 存储用户信息\n        localStorage.setItem('userInfo', JSON.stringify(res.data));\n        // 跳转到个人信息页面\n        router.push('/profile');\n      } catch (error) {\n        showFailToast(error.response?.data?.message || '登录失败');\n      }\n    };\n    const onClickLeft = () => {\n      router.back();\n    };\n    const goToRegister = () => {\n      router.push('/register');\n    };\n    return {\n      formData,\n      onSubmit,\n      onClickLeft,\n      goToRegister\n    };\n  }\n};","map":{"version":3,"names":["ref","useRouter","showSuccessToast","showFailToast","login","name","setup","router","formData","nickname","password","onSubmit","values","res","localStorage","setItem","JSON","stringify","data","push","error","response","message","onClickLeft","back","goToRegister"],"sources":["/Users/regeorge/Documents/codeStore/mini-sports/sports-h5/src/views/user/Login.vue"],"sourcesContent":["<template>\n  <div class=\"login\">\n    <van-nav-bar\n      title=\"用户登录\"\n      left-text=\"返回\"\n      left-arrow\n      @click-left=\"onClickLeft\"\n    />\n    \n    <van-form @submit=\"onSubmit\">\n      <van-cell-group inset>\n        <van-field\n          v-model=\"formData.nickname\"\n          name=\"nickname\"\n          label=\"昵称\"\n          placeholder=\"请输入昵称\"\n          :rules=\"[{ required: true, message: '请填写昵称' }]\"\n        />\n        <van-field\n          v-model=\"formData.password\"\n          type=\"password\"\n          name=\"password\"\n          label=\"密码\"\n          placeholder=\"请输入密码\"\n          :rules=\"[{ required: true, message: '请填写密码' }]\"\n        />\n      </van-cell-group>\n      \n      <div style=\"margin: 16px;\">\n        <van-button round block type=\"primary\" native-type=\"submit\">\n          登录\n        </van-button>\n      </div>\n    </van-form>\n\n    <div class=\"register-link\">\n      <span @click=\"goToRegister\">还没有账号？去注册</span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { showSuccessToast, showFailToast } from 'vant'\nimport { login } from '@/api/user'\n\nexport default {\n  name: 'Login',\n  setup() {\n    const router = useRouter()\n    const formData = ref({\n      nickname: '',\n      password: ''\n    })\n\n    const onSubmit = async (values) => {\n      try {\n        const res = await login(values)\n        showSuccessToast('登录成功')\n        // 存储用户信息\n        localStorage.setItem('userInfo', JSON.stringify(res.data))\n        // 跳转到个人信息页面\n        router.push('/profile')\n      } catch (error) {\n        showFailToast(error.response?.data?.message || '登录失败')\n      }\n    }\n\n    const onClickLeft = () => {\n      router.back()\n    }\n\n    const goToRegister = () => {\n      router.push('/register')\n    }\n\n    return {\n      formData,\n      onSubmit,\n      onClickLeft,\n      goToRegister\n    }\n  }\n}\n</script>\n\n<style scoped>\n.login {\n  padding-bottom: 20px;\n}\n.register-link {\n  text-align: center;\n  margin-top: 16px;\n  color: #1989fa;\n}\n.register-link span {\n  cursor: pointer;\n}\n</style> "],"mappings":"AA0CA,SAASA,GAAE,QAAS,KAAI;AACxB,SAASC,SAAQ,QAAS,YAAW;AACrC,SAASC,gBAAgB,EAAEC,aAAY,QAAS,MAAK;AACrD,SAASC,KAAI,QAAS,YAAW;AAEjC,eAAe;EACbC,IAAI,EAAE,OAAO;EACbC,KAAKA,CAAA,EAAG;IACN,MAAMC,MAAK,GAAIN,SAAS,CAAC;IACzB,MAAMO,QAAO,GAAIR,GAAG,CAAC;MACnBS,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE;IACZ,CAAC;IAED,MAAMC,QAAO,GAAI,MAAOC,MAAM,IAAK;MACjC,IAAI;QACF,MAAMC,GAAE,GAAI,MAAMT,KAAK,CAACQ,MAAM;QAC9BV,gBAAgB,CAAC,MAAM;QACvB;QACAY,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEC,IAAI,CAACC,SAAS,CAACJ,GAAG,CAACK,IAAI,CAAC;QACzD;QACAX,MAAM,CAACY,IAAI,CAAC,UAAU;MACxB,EAAE,OAAOC,KAAK,EAAE;QACdjB,aAAa,CAACiB,KAAK,CAACC,QAAQ,EAAEH,IAAI,EAAEI,OAAM,IAAK,MAAM;MACvD;IACF;IAEA,MAAMC,WAAU,GAAIA,CAAA,KAAM;MACxBhB,MAAM,CAACiB,IAAI,CAAC;IACd;IAEA,MAAMC,YAAW,GAAIA,CAAA,KAAM;MACzBlB,MAAM,CAACY,IAAI,CAAC,WAAW;IACzB;IAEA,OAAO;MACLX,QAAQ;MACRG,QAAQ;MACRY,WAAW;MACXE;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}