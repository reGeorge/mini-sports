{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login\"\n};\nconst _hoisted_2 = {\n  style: {\n    \"margin\": \"16px\"\n  }\n};\nconst _hoisted_3 = {\n  class: \"register-link\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_van_nav_bar = _resolveComponent(\"van-nav-bar\");\n  const _component_van_field = _resolveComponent(\"van-field\");\n  const _component_van_cell_group = _resolveComponent(\"van-cell-group\");\n  const _component_van_button = _resolveComponent(\"van-button\");\n  const _component_van_form = _resolveComponent(\"van-form\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_van_nav_bar, {\n    title: \"用户登录\",\n    \"left-text\": \"返回\",\n    \"left-arrow\": \"\",\n    onClickLeft: $setup.onClickLeft\n  }, null, 8 /* PROPS */, [\"onClickLeft\"]), _createVNode(_component_van_form, {\n    onSubmit: $setup.onSubmit\n  }, {\n    default: _withCtx(() => [_createVNode(_component_van_cell_group, {\n      inset: \"\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_van_field, {\n        modelValue: $setup.formData.nickname,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.formData.nickname = $event),\n        name: \"nickname\",\n        label: \"昵称\",\n        placeholder: \"请输入昵称\",\n        rules: [{\n          required: true,\n          message: '请填写昵称'\n        }]\n      }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_van_field, {\n        modelValue: $setup.formData.password,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.formData.password = $event),\n        type: \"password\",\n        name: \"password\",\n        label: \"密码\",\n        placeholder: \"请输入密码\",\n        rules: [{\n          required: true,\n          message: '请填写密码'\n        }]\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_van_button, {\n      round: \"\",\n      block: \"\",\n      type: \"primary\",\n      \"native-type\": \"submit\"\n    }, {\n      default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\" 登录 \")])),\n      _: 1 /* STABLE */\n    })])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onSubmit\"]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"span\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $setup.goToRegister && $setup.goToRegister(...args))\n  }, \"还没有账号？去注册\")])]);\n}","map":{"version":3,"names":["class","style","_createElementBlock","_hoisted_1","_createVNode","_component_van_nav_bar","title","onClickLeft","$setup","_component_van_form","onSubmit","default","_withCtx","_component_van_cell_group","inset","_component_van_field","modelValue","formData","nickname","_cache","$event","name","label","placeholder","rules","required","message","password","type","_","_createElementVNode","_hoisted_2","_component_van_button","round","block","_createTextVNode","_hoisted_3","onClick","args","goToRegister"],"sources":["/Users/regeorge/Documents/codeStore/mini-sports/sports-h5/src/views/user/Login.vue"],"sourcesContent":["<template>\n  <div class=\"login\">\n    <van-nav-bar\n      title=\"用户登录\"\n      left-text=\"返回\"\n      left-arrow\n      @click-left=\"onClickLeft\"\n    />\n    \n    <van-form @submit=\"onSubmit\">\n      <van-cell-group inset>\n        <van-field\n          v-model=\"formData.nickname\"\n          name=\"nickname\"\n          label=\"昵称\"\n          placeholder=\"请输入昵称\"\n          :rules=\"[{ required: true, message: '请填写昵称' }]\"\n        />\n        <van-field\n          v-model=\"formData.password\"\n          type=\"password\"\n          name=\"password\"\n          label=\"密码\"\n          placeholder=\"请输入密码\"\n          :rules=\"[{ required: true, message: '请填写密码' }]\"\n        />\n      </van-cell-group>\n      \n      <div style=\"margin: 16px;\">\n        <van-button round block type=\"primary\" native-type=\"submit\">\n          登录\n        </van-button>\n      </div>\n    </van-form>\n\n    <div class=\"register-link\">\n      <span @click=\"goToRegister\">还没有账号？去注册</span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { showSuccessToast, showFailToast } from 'vant'\nimport { login } from '@/api/user'\n\nexport default {\n  name: 'Login',\n  setup() {\n    const router = useRouter()\n    const formData = ref({\n      nickname: '',\n      password: ''\n    })\n\n    const onSubmit = async (values) => {\n      try {\n        const res = await login(values)\n        showSuccessToast('登录成功')\n        // 存储用户信息\n        localStorage.setItem('userInfo', JSON.stringify(res.data))\n        // 跳转到个人信息页面\n        router.push('/profile')\n      } catch (error) {\n        showFailToast(error.response?.data?.message || '登录失败')\n      }\n    }\n\n    const onClickLeft = () => {\n      router.back()\n    }\n\n    const goToRegister = () => {\n      router.push('/register')\n    }\n\n    return {\n      formData,\n      onSubmit,\n      onClickLeft,\n      goToRegister\n    }\n  }\n}\n</script>\n\n<style scoped>\n.login {\n  padding-bottom: 20px;\n}\n.register-link {\n  text-align: center;\n  margin-top: 16px;\n  color: #1989fa;\n}\n.register-link span {\n  cursor: pointer;\n}\n</style> "],"mappings":";;EACOA,KAAK,EAAC;AAAO;;EA2BTC,KAAqB,EAArB;IAAA;EAAA;AAAqB;;EAOvBD,KAAK,EAAC;AAAe;;;;;;;uBAlC5BE,mBAAA,CAqCM,OArCNC,UAqCM,GApCJC,YAAA,CAKEC,sBAAA;IAJAC,KAAK,EAAC,MAAM;IACZ,WAAS,EAAC,IAAI;IACd,YAAU,EAAV,EAAU;IACTC,WAAU,EAAEC,MAAA,CAAAD;4CAGfH,YAAA,CAwBWK,mBAAA;IAxBAC,QAAM,EAAEF,MAAA,CAAAE;EAAQ;IAT/BC,OAAA,EAAAC,QAAA,CAUM,MAgBiB,CAhBjBR,YAAA,CAgBiBS,yBAAA;MAhBDC,KAAK,EAAL;IAAK;MAV3BH,OAAA,EAAAC,QAAA,CAWQ,MAME,CANFR,YAAA,CAMEW,oBAAA;QAjBVC,UAAA,EAYmBR,MAAA,CAAAS,QAAQ,CAACC,QAAQ;QAZpC,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAYmBZ,MAAA,CAAAS,QAAQ,CAACC,QAAQ,GAAAE,MAAA;QAC1BC,IAAI,EAAC,UAAU;QACfC,KAAK,EAAC,IAAI;QACVC,WAAW,EAAC,OAAO;QAClBC,KAAK,EAAE;UAAAC,QAAA;UAAAC,OAAA;QAAA;+CAEVtB,YAAA,CAOEW,oBAAA;QAzBVC,UAAA,EAmBmBR,MAAA,CAAAS,QAAQ,CAACU,QAAQ;QAnBpC,uBAAAR,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAmBmBZ,MAAA,CAAAS,QAAQ,CAACU,QAAQ,GAAAP,MAAA;QAC1BQ,IAAI,EAAC,UAAU;QACfP,IAAI,EAAC,UAAU;QACfC,KAAK,EAAC,IAAI;QACVC,WAAW,EAAC,OAAO;QAClBC,KAAK,EAAE;UAAAC,QAAA;UAAAC,OAAA;QAAA;;MAxBlBG,CAAA;QA4BMC,mBAAA,CAIM,OAJNC,UAIM,GAHJ3B,YAAA,CAEa4B,qBAAA;MAFDC,KAAK,EAAL,EAAK;MAACC,KAAK,EAAL,EAAK;MAACN,IAAI,EAAC,SAAS;MAAC,aAAW,EAAC;;MA7B3DjB,OAAA,EAAAC,QAAA,CA6BoE,MAE5DO,MAAA,QAAAA,MAAA,OA/BRgB,gBAAA,CA6BoE,MAE5D,E;MA/BRN,CAAA;;IAAAA,CAAA;mCAmCIC,mBAAA,CAEM,OAFNM,UAEM,GADJN,mBAAA,CAA4C;IAArCO,OAAK,EAAAlB,MAAA,QAAAA,MAAA,UAAAmB,IAAA,KAAE9B,MAAA,CAAA+B,YAAA,IAAA/B,MAAA,CAAA+B,YAAA,IAAAD,IAAA,CAAY;KAAE,WAAS,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}