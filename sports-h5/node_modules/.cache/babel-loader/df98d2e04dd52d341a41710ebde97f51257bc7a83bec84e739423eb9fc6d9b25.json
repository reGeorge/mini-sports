{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { showSuccessToast, showFailToast } from 'vant';\nimport { updateUser } from '@/api/user';\nexport default {\n  name: 'UserEdit',\n  setup() {\n    const router = useRouter();\n    const formData = ref({\n      avatarUrl: '',\n      nickname: '',\n      phone: '',\n      gripStyle: '',\n      racketConfig: ''\n    });\n\n    // 握拍方式选项\n    const gripStyleOptions = ['右手直拍', '右手横拍', '左手直拍', '左手横拍'];\n\n    // 球拍配置选项\n    const racketConfigOptions = ['双面反胶', '双面颗粒胶', '一面反胶一面颗粒胶', '直拍单面反胶', '直拍单面颗粒胶'];\n    const showGripStylePicker = ref(false);\n    const showRacketConfigPicker = ref(false);\n    onMounted(() => {\n      const userInfo = JSON.parse(localStorage.getItem('userInfo') || '{}');\n      formData.value = {\n        ...formData.value,\n        ...userInfo\n      };\n    });\n    const onClickLeft = () => {\n      router.back();\n    };\n    const onGripStyleConfirm = value => {\n      formData.value.gripStyle = value;\n      showGripStylePicker.value = false;\n    };\n    const onRacketConfigConfirm = value => {\n      formData.value.racketConfig = value;\n      showRacketConfigPicker.value = false;\n    };\n    const handleSave = async () => {\n      try {\n        const res = await updateUser(formData.value);\n        // 更新本地存储的用户信息\n        localStorage.setItem('userInfo', JSON.stringify(res.data));\n        showSuccessToast('保存成功');\n        router.back();\n      } catch (error) {\n        showFailToast(error.response?.data?.message || '保存失败');\n      }\n    };\n    return {\n      formData,\n      gripStyleOptions,\n      racketConfigOptions,\n      showGripStylePicker,\n      showRacketConfigPicker,\n      onClickLeft,\n      onGripStyleConfirm,\n      onRacketConfigConfirm,\n      handleSave\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRouter","showSuccessToast","showFailToast","updateUser","name","setup","router","formData","avatarUrl","nickname","phone","gripStyle","racketConfig","gripStyleOptions","racketConfigOptions","showGripStylePicker","showRacketConfigPicker","userInfo","JSON","parse","localStorage","getItem","value","onClickLeft","back","onGripStyleConfirm","onRacketConfigConfirm","handleSave","res","setItem","stringify","data","error","response","message"],"sources":["/Users/regeorge/Documents/codeStore/mini-sports/sports-h5/src/views/user/UserEdit.vue"],"sourcesContent":["<template>\n  <div class=\"user-edit\">\n    <van-nav-bar\n      title=\"编辑资料\"\n      left-text=\"返回\"\n      left-arrow\n      @click-left=\"onClickLeft\"\n      right-text=\"保存\"\n      @click-right=\"handleSave\"\n    />\n    \n    <div class=\"form-content\">\n      <!-- 头像 -->\n      <div class=\"avatar-wrapper\">\n        <van-image\n          round\n          width=\"80\"\n          height=\"80\"\n          :src=\"formData.avatarUrl || '/images/avatar/fzd.png'\"\n        />\n      </div>\n\n      <!-- 基本信息 -->\n      <van-cell-group inset>\n        <van-field\n          v-model=\"formData.nickname\"\n          label=\"姓名\"\n          placeholder=\"请输入姓名\"\n          :rules=\"[{ required: true, message: '请填写姓名' }]\"\n          readonly\n        />\n        <van-field\n          v-model=\"formData.phone\"\n          label=\"手机\"\n          placeholder=\"请输入手机号\"\n          readonly\n        />\n      </van-cell-group>\n\n      <!-- 球拍信息 -->\n      <van-cell-group inset class=\"grip-info\">\n        <!-- 握拍方式 -->\n        <van-field\n          v-model=\"formData.gripStyle\"\n          label=\"握拍方式\"\n          placeholder=\"请选择握拍方式\"\n          readonly\n          is-link\n          @click=\"showGripStylePicker = true\"\n        />\n        <van-popup v-model:show=\"showGripStylePicker\" position=\"bottom\">\n          <van-picker\n            :columns=\"gripStyleOptions\"\n            @confirm=\"onGripStyleConfirm\"\n            @cancel=\"showGripStylePicker = false\"\n            show-toolbar\n            title=\"选择握拍方式\"\n          />\n        </van-popup>\n\n        <!-- 球拍配置 -->\n        <van-field\n          v-model=\"formData.racketConfig\"\n          label=\"球拍配置\"\n          placeholder=\"请选择球拍配置\"\n          readonly\n          is-link\n          @click=\"showRacketConfigPicker = true\"\n        />\n        <van-popup v-model:show=\"showRacketConfigPicker\" position=\"bottom\">\n          <van-picker\n            :columns=\"racketConfigOptions\"\n            @confirm=\"onRacketConfigConfirm\"\n            @cancel=\"showRacketConfigPicker = false\"\n            show-toolbar\n            title=\"选择球拍配置\"\n          />\n        </van-popup>\n      </van-cell-group>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { showSuccessToast, showFailToast } from 'vant'\nimport { updateUser } from '@/api/user'\n\nexport default {\n  name: 'UserEdit',\n  setup() {\n    const router = useRouter()\n    const formData = ref({\n      avatarUrl: '',\n      nickname: '',\n      phone: '',\n      gripStyle: '',\n      racketConfig: ''\n    })\n\n    // 握拍方式选项\n    const gripStyleOptions = [\n      '右手直拍',\n      '右手横拍',\n      '左手直拍',\n      '左手横拍'\n    ]\n\n    // 球拍配置选项\n    const racketConfigOptions = [\n      '双面反胶',\n      '双面颗粒胶',\n      '一面反胶一面颗粒胶',\n      '直拍单面反胶',\n      '直拍单面颗粒胶'\n    ]\n\n    const showGripStylePicker = ref(false)\n    const showRacketConfigPicker = ref(false)\n\n    onMounted(() => {\n      const userInfo = JSON.parse(localStorage.getItem('userInfo') || '{}')\n      formData.value = {\n        ...formData.value,\n        ...userInfo\n      }\n    })\n\n    const onClickLeft = () => {\n      router.back()\n    }\n\n    const onGripStyleConfirm = (value) => {\n      formData.value.gripStyle = value\n      showGripStylePicker.value = false\n    }\n\n    const onRacketConfigConfirm = (value) => {\n      formData.value.racketConfig = value\n      showRacketConfigPicker.value = false\n    }\n\n    const handleSave = async () => {\n      try {\n        const res = await updateUser(formData.value)\n        // 更新本地存储的用户信息\n        localStorage.setItem('userInfo', JSON.stringify(res.data))\n        showSuccessToast('保存成功')\n        router.back()\n      } catch (error) {\n        showFailToast(error.response?.data?.message || '保存失败')\n      }\n    }\n\n    return {\n      formData,\n      gripStyleOptions,\n      racketConfigOptions,\n      showGripStylePicker,\n      showRacketConfigPicker,\n      onClickLeft,\n      onGripStyleConfirm,\n      onRacketConfigConfirm,\n      handleSave\n    }\n  }\n}\n</script>\n\n<style scoped>\n.user-edit {\n  min-height: 100vh;\n  background-color: #f7f8fa;\n  padding-bottom: 20px;\n}\n\n.form-content {\n  padding: 20px;\n}\n\n.avatar-wrapper {\n  text-align: center;\n  margin-bottom: 20px;\n}\n\n.grip-info {\n  margin-top: 12px;\n}\n\n:deep(.van-cell-group) {\n  margin: 0;\n}\n\n:deep(.van-field__label) {\n  width: 80px;\n}\n</style> "],"mappings":"AAoFA,SAASA,GAAG,EAAEC,SAAQ,QAAS,KAAI;AACnC,SAASC,SAAQ,QAAS,YAAW;AACrC,SAASC,gBAAgB,EAAEC,aAAY,QAAS,MAAK;AACrD,SAASC,UAAS,QAAS,YAAW;AAEtC,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,KAAKA,CAAA,EAAG;IACN,MAAMC,MAAK,GAAIN,SAAS,CAAC;IACzB,MAAMO,QAAO,GAAIT,GAAG,CAAC;MACnBU,SAAS,EAAE,EAAE;MACbC,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE,EAAE;MACTC,SAAS,EAAE,EAAE;MACbC,YAAY,EAAE;IAChB,CAAC;;IAED;IACA,MAAMC,gBAAe,GAAI,CACvB,MAAM,EACN,MAAM,EACN,MAAM,EACN,MAAK,CACP;;IAEA;IACA,MAAMC,mBAAkB,GAAI,CAC1B,MAAM,EACN,OAAO,EACP,WAAW,EACX,QAAQ,EACR,SAAQ,CACV;IAEA,MAAMC,mBAAkB,GAAIjB,GAAG,CAAC,KAAK;IACrC,MAAMkB,sBAAqB,GAAIlB,GAAG,CAAC,KAAK;IAExCC,SAAS,CAAC,MAAM;MACd,MAAMkB,QAAO,GAAIC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,UAAU,KAAK,IAAI;MACpEd,QAAQ,CAACe,KAAI,GAAI;QACf,GAAGf,QAAQ,CAACe,KAAK;QACjB,GAAGL;MACL;IACF,CAAC;IAED,MAAMM,WAAU,GAAIA,CAAA,KAAM;MACxBjB,MAAM,CAACkB,IAAI,CAAC;IACd;IAEA,MAAMC,kBAAiB,GAAKH,KAAK,IAAK;MACpCf,QAAQ,CAACe,KAAK,CAACX,SAAQ,GAAIW,KAAI;MAC/BP,mBAAmB,CAACO,KAAI,GAAI,KAAI;IAClC;IAEA,MAAMI,qBAAoB,GAAKJ,KAAK,IAAK;MACvCf,QAAQ,CAACe,KAAK,CAACV,YAAW,GAAIU,KAAI;MAClCN,sBAAsB,CAACM,KAAI,GAAI,KAAI;IACrC;IAEA,MAAMK,UAAS,GAAI,MAAAA,CAAA,KAAY;MAC7B,IAAI;QACF,MAAMC,GAAE,GAAI,MAAMzB,UAAU,CAACI,QAAQ,CAACe,KAAK;QAC3C;QACAF,YAAY,CAACS,OAAO,CAAC,UAAU,EAAEX,IAAI,CAACY,SAAS,CAACF,GAAG,CAACG,IAAI,CAAC;QACzD9B,gBAAgB,CAAC,MAAM;QACvBK,MAAM,CAACkB,IAAI,CAAC;MACd,EAAE,OAAOQ,KAAK,EAAE;QACd9B,aAAa,CAAC8B,KAAK,CAACC,QAAQ,EAAEF,IAAI,EAAEG,OAAM,IAAK,MAAM;MACvD;IACF;IAEA,OAAO;MACL3B,QAAQ;MACRM,gBAAgB;MAChBC,mBAAmB;MACnBC,mBAAmB;MACnBC,sBAAsB;MACtBO,WAAW;MACXE,kBAAkB;MAClBC,qBAAqB;MACrBC;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}