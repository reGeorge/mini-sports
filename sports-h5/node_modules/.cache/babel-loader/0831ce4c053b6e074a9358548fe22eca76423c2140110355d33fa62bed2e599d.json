{"ast":null,"code":"import { ref } from 'vue';\nimport { searchUserPoints } from '@/api/points';\nimport { showToast } from 'vant';\nimport TabbarLayout from '@/components/layout/TabbarLayout.vue';\nexport default {\n  name: 'PointsSearch',\n  components: {\n    TabbarLayout\n  },\n  setup() {\n    const searchValue = ref('');\n    const searchResults = ref([]);\n    const hasSearched = ref(false);\n    const showDetailPopup = ref(false);\n    const selectedUser = ref(null);\n    const onSearch = async () => {\n      if (!searchValue.value.trim()) {\n        showToast('请输入搜索内容');\n        return;\n      }\n      try {\n        const res = await searchUserPoints(searchValue.value);\n        searchResults.value = res.data;\n        hasSearched.value = true;\n      } catch (error) {\n        showToast('搜索失败');\n      }\n    };\n    const onCancel = () => {\n      searchValue.value = '';\n      searchResults.value = [];\n      hasSearched.value = false;\n    };\n    const showDetail = user => {\n      selectedUser.value = user;\n      showDetailPopup.value = true;\n    };\n    return {\n      searchValue,\n      searchResults,\n      hasSearched,\n      showDetailPopup,\n      selectedUser,\n      onSearch,\n      onCancel,\n      showDetail\n    };\n  }\n};","map":{"version":3,"names":["ref","searchUserPoints","showToast","TabbarLayout","name","components","setup","searchValue","searchResults","hasSearched","showDetailPopup","selectedUser","onSearch","value","trim","res","data","error","onCancel","showDetail","user"],"sources":["/Users/regeorge/Documents/codeStore/mini-sports/sports-h5/src/views/points/PointsSearch.vue"],"sourcesContent":["<template>\n  <tabbar-layout>\n    <div class=\"points-search\">\n      <van-nav-bar title=\"积分查询\" />\n      \n      <!-- 搜索框 -->\n      <div class=\"search-box\">\n        <van-search\n          v-model=\"searchValue\"\n          placeholder=\"请输入姓名搜索\"\n          @search=\"onSearch\"\n          shape=\"round\"\n          show-action\n          @cancel=\"onCancel\"\n        />\n      </div>\n\n      <!-- 搜索结果列表 -->\n      <div class=\"search-results\" v-if=\"searchResults.length > 0\">\n        <div class=\"result-item\" v-for=\"item in searchResults\" :key=\"item.id\" @click=\"showDetail(item)\">\n          <div class=\"item-header\">\n            <span class=\"rank-number\">{{ item.rank }}</span>\n            <span class=\"player-name\">{{ item.nickname }}</span>\n            <span class=\"player-gender\">{{ item.gender }}</span>\n          </div>\n          <div class=\"item-body\">\n            <div class=\"points-info\">\n              <span class=\"points\">{{ item.points }}</span>\n              <span class=\"level\">{{ item.level }}</span>\n            </div>\n            <div class=\"rank-info\">\n              <span class=\"total-rank\">总排名: {{ item.totalRank }}</span>\n              <span class=\"match-count\">场次: {{ item.matchCount }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 无搜索结果提示 -->\n      <div class=\"no-result\" v-else-if=\"hasSearched\">\n        <van-empty description=\"未找到相关用户\" />\n      </div>\n\n      <!-- 用户详情弹窗 -->\n      <van-popup v-model:show=\"showDetailPopup\" round position=\"bottom\" :style=\"{ height: '70%' }\">\n        <div class=\"detail-popup\" v-if=\"selectedUser\">\n          <div class=\"popup-header\">\n            <div class=\"header-title\">详细信息</div>\n            <van-icon name=\"cross\" @click=\"showDetailPopup = false\" />\n          </div>\n          <div class=\"user-info\">\n            <div class=\"info-row\">\n              <span class=\"label\">ID</span>\n              <span class=\"value\">{{ selectedUser.id }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"label\">昵称</span>\n              <span class=\"value\">{{ selectedUser.nickname }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"label\">性别</span>\n              <span class=\"value\">{{ selectedUser.gender }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"label\">居住地</span>\n              <span class=\"value\">{{ selectedUser.address }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"label\">握拍方式</span>\n              <span class=\"value\">{{ selectedUser.gripStyle }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"label\">球拍配置</span>\n              <span class=\"value\">{{ selectedUser.racketConfig }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"label\">水平级别</span>\n              <span class=\"value\">{{ selectedUser.level }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"label\">注册时间</span>\n              <span class=\"value\">{{ selectedUser.registerTime }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"label\">参赛场次</span>\n              <span class=\"value\">{{ selectedUser.matchCount }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"label\">全网排名</span>\n              <span class=\"value\">{{ selectedUser.totalRank }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"label\">胜率</span>\n              <span class=\"value\">{{ selectedUser.winRate }}%</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"label\">历史最高积分</span>\n              <span class=\"value\">{{ selectedUser.highestPoints }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"label\">年度平均积分</span>\n              <span class=\"value\">{{ selectedUser.yearlyAveragePoints }}</span>\n            </div>\n          </div>\n        </div>\n      </van-popup>\n    </div>\n  </tabbar-layout>\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { searchUserPoints } from '@/api/points'\nimport { showToast } from 'vant'\nimport TabbarLayout from '@/components/layout/TabbarLayout.vue'\n\nexport default {\n  name: 'PointsSearch',\n  components: {\n    TabbarLayout\n  },\n  setup() {\n    const searchValue = ref('')\n    const searchResults = ref([])\n    const hasSearched = ref(false)\n    const showDetailPopup = ref(false)\n    const selectedUser = ref(null)\n\n    const onSearch = async () => {\n      if (!searchValue.value.trim()) {\n        showToast('请输入搜索内容')\n        return\n      }\n\n      try {\n        const res = await searchUserPoints(searchValue.value)\n        searchResults.value = res.data\n        hasSearched.value = true\n      } catch (error) {\n        showToast('搜索失败')\n      }\n    }\n\n    const onCancel = () => {\n      searchValue.value = ''\n      searchResults.value = []\n      hasSearched.value = false\n    }\n\n    const showDetail = (user) => {\n      selectedUser.value = user\n      showDetailPopup.value = true\n    }\n\n    return {\n      searchValue,\n      searchResults,\n      hasSearched,\n      showDetailPopup,\n      selectedUser,\n      onSearch,\n      onCancel,\n      showDetail\n    }\n  }\n}\n</script>\n\n<style scoped>\n.points-search {\n  min-height: 100vh;\n  background-color: #f7f8fa;\n}\n\n.search-box {\n  padding: 8px 0;\n  background: #fff;\n}\n\n.search-results {\n  padding: 12px;\n}\n\n.result-item {\n  background: white;\n  border-radius: 8px;\n  padding: 12px;\n  margin-bottom: 12px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n}\n\n.item-header {\n  display: flex;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.rank-number {\n  font-size: 16px;\n  font-weight: bold;\n  margin-right: 12px;\n}\n\n.player-name {\n  font-size: 16px;\n  font-weight: bold;\n  flex: 1;\n}\n\n.player-gender {\n  color: #666;\n  margin-left: 8px;\n}\n\n.item-body {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.points-info {\n  display: flex;\n  align-items: center;\n}\n\n.points {\n  font-size: 18px;\n  color: #ff6b01;\n  font-weight: bold;\n  margin-right: 8px;\n}\n\n.level {\n  color: #666;\n}\n\n.rank-info {\n  color: #666;\n  font-size: 14px;\n}\n\n.total-rank {\n  margin-right: 12px;\n}\n\n.detail-popup {\n  padding: 20px;\n}\n\n.popup-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-bottom: 16px;\n  margin-bottom: 16px;\n  border-bottom: 1px solid #eee;\n}\n\n.header-title {\n  font-size: 18px;\n  font-weight: bold;\n}\n\n.user-info {\n  overflow-y: auto;\n  max-height: calc(70vh - 60px);\n}\n\n.info-row {\n  display: flex;\n  padding: 12px 0;\n  border-bottom: 1px solid #f5f5f5;\n}\n\n.info-row .label {\n  width: 100px;\n  color: #666;\n}\n\n.info-row .value {\n  flex: 1;\n  color: #333;\n}\n\n.no-result {\n  margin-top: 60px;\n}\n</style> "],"mappings":"AA+GA,SAASA,GAAE,QAAS,KAAI;AACxB,SAASC,gBAAe,QAAS,cAAa;AAC9C,SAASC,SAAQ,QAAS,MAAK;AAC/B,OAAOC,YAAW,MAAO,sCAAqC;AAE9D,eAAe;EACbC,IAAI,EAAE,cAAc;EACpBC,UAAU,EAAE;IACVF;EACF,CAAC;EACDG,KAAKA,CAAA,EAAG;IACN,MAAMC,WAAU,GAAIP,GAAG,CAAC,EAAE;IAC1B,MAAMQ,aAAY,GAAIR,GAAG,CAAC,EAAE;IAC5B,MAAMS,WAAU,GAAIT,GAAG,CAAC,KAAK;IAC7B,MAAMU,eAAc,GAAIV,GAAG,CAAC,KAAK;IACjC,MAAMW,YAAW,GAAIX,GAAG,CAAC,IAAI;IAE7B,MAAMY,QAAO,GAAI,MAAAA,CAAA,KAAY;MAC3B,IAAI,CAACL,WAAW,CAACM,KAAK,CAACC,IAAI,CAAC,CAAC,EAAE;QAC7BZ,SAAS,CAAC,SAAS;QACnB;MACF;MAEA,IAAI;QACF,MAAMa,GAAE,GAAI,MAAMd,gBAAgB,CAACM,WAAW,CAACM,KAAK;QACpDL,aAAa,CAACK,KAAI,GAAIE,GAAG,CAACC,IAAG;QAC7BP,WAAW,CAACI,KAAI,GAAI,IAAG;MACzB,EAAE,OAAOI,KAAK,EAAE;QACdf,SAAS,CAAC,MAAM;MAClB;IACF;IAEA,MAAMgB,QAAO,GAAIA,CAAA,KAAM;MACrBX,WAAW,CAACM,KAAI,GAAI,EAAC;MACrBL,aAAa,CAACK,KAAI,GAAI,EAAC;MACvBJ,WAAW,CAACI,KAAI,GAAI,KAAI;IAC1B;IAEA,MAAMM,UAAS,GAAKC,IAAI,IAAK;MAC3BT,YAAY,CAACE,KAAI,GAAIO,IAAG;MACxBV,eAAe,CAACG,KAAI,GAAI,IAAG;IAC7B;IAEA,OAAO;MACLN,WAAW;MACXC,aAAa;MACbC,WAAW;MACXC,eAAe;MACfC,YAAY;MACZC,QAAQ;MACRM,QAAQ;MACRC;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}